<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>全功能中文識字通 (筆順+解釋+造句)</title>
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #4A90E2;       /* 主色藍 */
            --secondary: #f39c12;     /* 輔助橘 (練習用) */
            --bg-color: #F5F7FA;
            --card-bg: #FFFFFF;
            --text-main: #2C3E50;
            --border-radius: 12px;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- 搜尋區 --- */
        .search-container {
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
            text-align: center;
        }

        .search-box {
            display: flex;
            background: white;
            padding: 5px;
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        input {
            flex: 1;
            padding: 15px 25px;
            border: none;
            font-size: 1.1rem;
            outline: none;
            border-radius: 50px;
        }

        button.search-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 40px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
        }

        button.search-btn:hover { background: #357ABD; }

        /* --- 主內容區 (隱藏直到搜尋) --- */
        #mainContent {
            display: none; 
            width: 100%;
            max-width: 900px;
            animation: fadeIn 0.5s;
        }

        /* 詞語標題 */
        .word-header {
            text-align: center;
            margin-bottom: 20px;
        }
        .word-title {
            font-size: 2.5rem;
            color: var(--primary);
            font-weight: bold;
            margin: 0;
        }
        .word-pinyin {
            color: #7f8c8d;
            font-size: 1.2rem;
            margin-top: 5px;
        }

        /* --- 1. 上半部：筆順練習區 (左右兩欄) --- */
        .practice-section {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 30px;
        }

        /* 單字切換按鈕 (如果是多字詞) */
        .char-tabs {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .char-tab {
            font-size: 1.5rem;
            padding: 10px 20px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.2s;
        }

        .char-tab.active {
            border-color: var(--primary);
            background: #EBF5FB;
            color: var(--primary);
            font-weight: bold;
        }

        /* 筆順卡片 */
        .writer-card {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 320px;
        }

        .card-title {
            font-size: 1.1rem;
            margin-bottom: 10px;
            border-left: 4px solid;
            padding-left: 10px;
            width: 100%;
            text-align: left;
        }

        /* 筆順容器 */
        .writer-box {
            border: 1px solid #eee;
            background-image: linear-gradient(0deg, transparent 49%, #eee 50%, transparent 51%), 
                              linear-gradient(90deg, transparent 49%, #eee 50%, transparent 51%);
            background-size: 100% 100%;
            margin-bottom: 15px;
        }

        .controls {
            display: flex;
            gap: 10px;
        }

        .btn-ctrl {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn-demo { background: #EBF5FB; color: var(--primary); }
        .btn-quiz { background: #FEF5E7; color: var(--secondary); }

        /* --- 2. 下半部：解釋與造句區 --- */
        .info-section {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .section-label {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--text-main);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .section-label::before {
            content: '';
            display: block;
            width: 6px;
            height: 24px;
            background: var(--primary);
            border-radius: 3px;
        }

        .definition-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #34495e;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
        }

        .sentence-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sentence-item {
            font-size: 1.1rem;
            padding: 15px;
            margin-bottom: 12px;
            background-color: #fff;
            border: 1px solid #eee;
            border-left: 4px solid var(--secondary);
            border-radius: 8px;
            line-height: 1.6;
        }

        .highlight {
            color: #e74c3c;
            font-weight: bold;
            background: rgba(231, 76, 60, 0.1);
            padding: 0 4px;
            border-radius: 4px;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* 手機版調整 */
        @media (max-width: 768px) {
            .writer-card { width: 100%; }
        }
    </style>
</head>
<body>

    <div class="search-container">
        <h1 style="color: var(--primary);">🏫 識字通：寫字、解釋、造句</h1>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="輸入詞語 (例如：打掃、猴子、天氣)..." onkeypress="handleEnter(event)">
            <button class="search-btn" onclick="searchWord()">開始學習</button>
        </div>
        <p style="color: #999; font-size: 0.9rem; margin-top: 10px;">資料庫包含：打掃、猴子、天氣、小明、紅綠燈...等 130+ 詞語</p>
    </div>

    <div id="mainContent">
        <div class="word-header">
            <h2 class="word-title" id="displayWord"></h2>
            <div class="word-pinyin" id="displayPinyin"></div>
        </div>

        <div class="char-tabs" id="charTabs">
            </div>

        <div class="practice-section">
            <div class="writer-card" style="border-top: 4px solid var(--primary);">
                <div class="card-title" style="color: var(--primary);">👀 筆順演示</div>
                <div id="demo-writer" class="writer-box"></div>
                <div class="controls">
                    <button class="btn-ctrl btn-demo" onclick="animateChar()">
                        <span>▶</span> 播放
                    </button>
                </div>
            </div>

            <div class="writer-card" style="border-top: 4px solid var(--secondary);">
                <div class="card-title" style="color: var(--secondary);">✏️ 學生練習 (請用滑鼠或手指寫)</div>
                <div id="quiz-writer" class="writer-box"></div>
                <div class="controls">
                    <button class="btn-ctrl btn-quiz" onclick="quizChar()">
                        <span>↺</span> 重寫
                    </button>
                </div>
            </div>
        </div>

        <div class="info-section">
            <div class="section-label">📖 詞語解釋</div>
            <div class="definition-text" id="displayDefinition"></div>

            <div class="section-label">🗣️ 造句練習</div>
            <ul class="sentence-list" id="displaySentences"></ul>
        </div>
    </div>

    <script>
        /**
         * 📚 完整資料庫 (包含 5 本書所有詞語)
         * 結構：Key: { definition: "解釋", sentences: ["例句"] }
         * 筆順不需要存，因為 HanziWriter 會自動去網路抓字形資料。
         */
        const fullDatabase = {
            // --- 2223一下一冊 (1-6課) ---
            "打掃": { def: "整理清潔，使環境乾淨。", sent: ["過年前，全家人一起<b>打掃</b>房子。", "我們要把教室<b>打掃</b>得乾乾淨淨。"] },
            "擦": { def: "摩擦，去除髒汙。", sent: ["媽媽用抹布把桌子<b>擦</b>得很乾淨。", "請幫忙<b>擦</b>黑板。"] },
            "抹": { def: "塗擦或塗敷。", sent: ["他在麵包上<b>抹</b>了一層果醬。", "弟弟把臉<b>抹</b>得髒兮兮的。"] },
            "換": { def: "互易、更改。", sent: ["天氣冷了，要<b>換</b>上厚外套。", "燈泡壞了，爸爸拿一個新的來<b>換</b>。"] },
            "搬": { def: "遷移、移動。", sent: ["螞蟻正在努力地<b>搬</b>食物。", "這張桌子太重了，我<b>搬</b>不動。"] },
            "收拾": { def: "整理、整頓。", sent: ["玩完玩具後，要記得<b>收拾</b>好。", "快點<b>收拾</b>書包，要去學校了。"] },
            "明亮": { def: "光亮、不昏暗。", sent: ["早晨的陽光讓房間變得好<b>明亮</b>。", "這間教室寬敞又<b>明亮</b>。"] },
            "整潔": { def: "整齊清潔。", sent: ["保持儀容<b>整潔</b>是有禮貌的表現。", "這條街道看起來非常<b>整潔</b>。"] },
            "高興": { def: "歡喜、愉快。", sent: ["收到生日禮物，我感到非常<b>高興</b>。", "今天去郊遊，大家都很<b>高興</b>。"] },
            "房子": { def: "供人居住或作其他用途的建築物。", sent: ["這座<b>房子</b>前面有一個大花園。", "小鳥在樹上蓋了一座小<b>房子</b>。"] },
            "地板": { def: "房屋地面的鋪設層。", sent: ["弟弟坐在<b>地板</b>上玩積木。", "<b>地板</b>剛拖過，走路要小心滑倒。"] },
            "窗戶": { def: "房屋牆壁上通氣透光的洞口。", sent: ["請把<b>窗戶</b>打開，讓空氣流通。", "小貓坐在<b>窗戶</b>邊看風景。"] },
            "牀單": { def: "鋪在牀面上的布單。", sent: ["媽媽換上了乾淨的<b>牀單</b>。", "我不小心把果汁灑在<b>牀單</b>上了。"] },
            "新年": { def: "一年的開始。", sent: ["<b>新年</b>到了，大家都穿上新衣服。", "祝你<b>新年</b>快樂！"] },
            "一起": { def: "一同、一塊兒。", sent: ["放學後，我們<b>一起</b>走路回家。", "大家<b>一起</b>合作，很快就做完了。"] },
            "除夕": { def: "農曆十二月最後一天的夜晚。", sent: ["<b>除夕</b>夜，全家人圍爐吃年夜飯。", "<b>除夕</b>是團圓的日子。"] },
            "一齊": { def: "同時、一同。", sent: ["大家<b>一齊</b>拍手叫好。", "風吹來，花兒<b>一齊</b>點頭。"] },
            "最": { def: "極、甚。表示程度深。", sent: ["這是我<b>最</b>喜歡的玩具。", "媽媽做的菜<b>最</b>好吃了。"] },
            "色彩": { def: "顏色。", sent: ["這幅畫的<b>色彩</b>很豐富。", "春天讓大地充滿了<b>色彩</b>。"] },
            "萬紫千紅": { def: "形容百花盛開，多彩燦爛的景象。", sent: ["花園裡<b>萬紫千紅</b>，美麗極了。", "春天到了，公園裡<b>萬紫千紅</b>。"] },
            "船": { def: "水上交通工具。", sent: ["漁夫划著<b>船</b>去捕魚。", "彎彎的月亮像一艘小<b>船</b>。"] },
            "彎": { def: "彎曲、不直。", sent: ["雨後出現了一道<b>彎</b><b>彎</b>的彩虹。", "這條山路有很多轉<b>彎</b>。"] },
            "閃": { def: "光亮忽明忽滅。", sent: ["天上的星星<b>閃</b>個不停。", "閃電在空中一<b>閃</b>而過。"] },
            "串": { def: "連貫、貫通。", sent: ["我想買一<b>串</b>葡萄。", "這是一<b>串</b>美麗的珍珠項鍊。"] },
            "西瓜": { def: "夏季常見的水果，果肉多汁。", sent: ["夏天吃冰涼的<b>西瓜</b>最消暑。", "這顆<b>西瓜</b>又大又圓。"] },
            "葡萄": { def: "水果名，球形或橢圓形。", sent: ["紫色的<b>葡萄</b>酸酸甜甜的。", "架子上掛滿了一串串<b>葡萄</b>。"] },
            "長輩": { def: "輩分高的人。", sent: ["見到<b>長輩</b>要問好。", "我們要尊敬<b>長輩</b>。"] },
            "傍晚": { def: "臨近晚上的時候。", sent: ["<b>傍晚</b>時分，夕陽染紅了天空。", "爺爺喜歡在<b>傍晚</b>散步。"] },
            "晚霞": { def: "日落時天邊的雲彩。", sent: ["美麗的<b>晚霞</b>映照在湖面上。", "今天的<b>晚霞</b>特別紅。"] },
            "變化": { def: "事物在形態或本質上產生改變。", sent: ["雲的形狀<b>變化</b>多端。", "這幾年家鄉的<b>變化</b>很大。"] },
            "清潔": { def: "乾淨。", sent: ["我們要保持環境<b>清潔</b>。", "刷牙可以讓牙齒<b>清潔</b>。"] },
            "洗澡": { def: "用水洗淨身體。", sent: ["每天運動後都要<b>洗澡</b>。", "小狗不喜歡<b>洗澡</b>。"] },
            "有趣": { def: "有興味、趣味。", sent: ["這本故事書非常<b>有趣</b>。", "他是一個<b>有趣</b>的人。"] },
            "捉迷藏": { def: "一種蒙住眼睛尋找躲藏者的遊戲。", sent: ["下課時，我們在操場玩<b>捉迷藏</b>。", "小貓躲在草叢裡像在玩<b>捉迷藏</b>。"] },
            "格外": { def: "特別、分外。", sent: ["雨後的空氣<b>格外</b>清新。", "今晚的月亮<b>格外</b>明亮。"] },
            "歡笑": { def: "歡樂地笑。", sent: ["操場上充滿了孩子的<b>歡笑</b>聲。", "大家<b>歡笑</b>著慶祝勝利。"] },
            "漂亮": { def: "美麗、好看。", sent: ["這件洋裝真<b>漂亮</b>。", "花園裡開滿了<b>漂亮</b>的花。"] },
            "充滿": { def: "填滿、布滿。", sent: ["這間屋子<b>充滿</b>了歡樂的氣氛。", "我對未來<b>充滿</b>希望。"] },
            "熱鬧": { def: "場面活躍，氣氛熱烈。", sent: ["夜市裡人來人往，非常<b>熱鬧</b>。", "過年時家裡很<b>熱鬧</b>。"] },

            // --- 2526一上一冊 (1-6課) ---
            "兔子": { def: "哺乳動物，長耳短尾。", sent: ["小白<b>兔子</b>愛吃紅蘿蔔。", "<b>兔子</b>跳得很快。"] },
            "鼻子": { def: "嗅覺器官。", sent: ["大象的<b>鼻子</b>很長。", "感冒時<b>鼻子</b>會不舒服。"] },
            "門牙": { def: "位於口腔前部的牙齒。", sent: ["小兔子的<b>門牙</b>很大。", "弟弟掉了一顆<b>門牙</b>。"] },
            "耳朵": { def: "聽覺器官。", sent: ["兔子的<b>耳朵</b>長長的。", "請打開<b>耳朵</b>仔細聽。"] },
            "嘴巴": { def: "人或動物的口。", sent: ["河馬的<b>嘴巴</b>很大。", "吃東西要閉上<b>嘴巴</b>。"] },
            "短": { def: "兩端距離小，與「長」相對。", sent: ["這支鉛筆變<b>短</b>了。", "兔子的尾巴很<b>短</b>。"] },
            "圓": { def: "圓形。", sent: ["月亮圓<b>圓</b>的。", "這顆球是<b>圓</b>的。"] },
            "像": { def: "相似。", sent: ["天上的雲<b>像</b>棉花糖。", "妹妹長得<b>像</b>媽媽。"] },
            "看見": { def: "看到。", sent: ["我<b>看見</b>天上有彩虹。", "你<b>看見</b>我的書包了嗎？"] },
            "張開": { def: "展開、打開。", sent: ["小鳥<b>張開</b>翅膀飛翔。", "看牙醫時要<b>張開</b>嘴巴。"] },
            "衛士": { def: "擔任保衛工作的士兵。", sent: ["白血球是身體的健康<b>衛士</b>。", "守門的<b>衛士</b>站得很直。"] },
            "聽見": { def: "聽到。", sent: ["我<b>聽見</b>了小鳥的歌聲。", "你有<b>聽見</b>鬧鐘響嗎？"] },
            "碰面": { def: "會面、見面。", sent: ["我和好朋友在公園<b>碰面</b>。", "我們約好明天<b>碰面</b>。"] },
            "中央": { def: "中心位置。", sent: ["噴水池在公園的<b>中央</b>。", "廣場<b>中央</b>有一座雕像。"] },
            "唱歌": { def: "吟唱歌曲。", sent: ["妹妹喜歡大聲<b>唱歌</b>。", "小鳥在樹上<b>唱歌</b>。"] },
            "跳舞": { def: "隨著音樂舞動身體。", sent: ["大家圍著營火<b>跳舞</b>。", "孔雀開屏像在<b>跳舞</b>。"] },
            "爺爺": { def: "祖父，爸爸的爸爸。", sent: ["<b>爺爺</b>戴著老花眼鏡看報紙。", "我最喜歡聽<b>爺爺</b>說故事。"] },
            "鞋子": { def: "穿在腳上保護足部的東西。", sent: ["這雙新<b>鞋子</b>很舒適。", "進屋要脫<b>鞋子</b>。"] },
            "孩子": { def: "兒童、兒女。", sent: ["每個<b>孩子</b>都是父母的寶貝。", "她是個懂事的<b>孩子</b>。"] },
            "生病": { def: "患病。", sent: ["<b>生病</b>了要多休息。", "弟弟<b>生病</b>了，媽媽帶他去看醫生。"] },
            "蘋果": { def: "常見水果，圓形。", sent: ["多吃<b>蘋果</b>身體好。", "紅紅的<b>蘋果</b>真香甜。"] },
            "書包": { def: "裝書本的袋子。", sent: ["我背著<b>書包</b>去上學。", "<b>書包</b>裡有課本和文具。"] },
            "講故事": { def: "說故事。", sent: ["老師正在<b>講故事</b>給我們聽。", "睡覺前，媽媽會<b>講故事</b>。"] },
            "膽小": { def: "膽量小、害怕。", sent: ["老鼠很<b>膽小</b>，一有聲音就跑。", "不要<b>膽小</b>，要勇敢嘗試。"] },
            "總是": { def: "一直是、一向是。", sent: ["他<b>總是</b>笑瞇瞇的。", "上學<b>總是</b>要準時。"] },
            "回答": { def: "答覆、回應。", sent: ["請舉手<b>回答</b>問題。", "他的<b>回答</b>很正確。"] },

            // --- 2223一下二冊 (7-11課) ---
            "郊野": { def: "城邑之外的荒野。", sent: ["我們去<b>郊野</b>踏青。", "<b>郊野</b>的空氣很新鮮。"] },
            "公園": { def: "供公眾遊樂休憩的園地。", sent: ["<b>公園</b>裡有很多人在散步。", "我們約在<b>公園</b>門口見。"] },
            "天氣": { def: "大氣變化的現象。", sent: ["今天<b>天氣</b>很好。", "<b>天氣</b>變冷了。"] },
            "清新": { def: "清爽新鮮。", sent: ["雨後空氣<b>清新</b>。", "早晨的空氣特別<b>清新</b>。"] },
            "猴子": { def: "靈長類動物。", sent: ["<b>猴子</b>在樹上跳來跳去。", "動物園裡有可愛的<b>猴子</b>。"] },
            "牠們": { def: "稱代動物的複數。", sent: ["鳥兒在唱歌，<b>牠們</b>很快樂。", "愛護動物，不要傷害<b>牠們</b>。"] },
            "追逐": { def: "追趕。", sent: ["小狗在草地上互相<b>追逐</b>。", "孩子們在<b>追逐</b>嬉戲。"] },
            "突然": { def: "忽然、未意料到。", sent: ["<b>突然</b>下起大雨。", "燈<b>突然</b>亮了。"] },
            "立刻": { def: "馬上、即刻。", sent: ["聽到鈴聲，大家<b>立刻</b>進教室。", "發現錯誤要<b>立刻</b>改正。"] },
            "參觀": { def: "實地觀覽。", sent: ["我們去<b>參觀</b>博物館。", "歡迎<b>參觀</b>我的房間。"] },
            "優良": { def: "優秀良好。", sent: ["他是品行<b>優良</b>的學生。", "這家店服務<b>優良</b>。"] },
            "介紹": { def: "為人引進或帶入新的事物。", sent: ["老師向我們<b>介紹</b>新同學。", "請自我<b>介紹</b>一下。"] },
            "許多": { def: "很多。", sent: ["這裡有<b>許多</b>美麗的花。", "我有<b>許多</b>好朋友。"] },
            "知識": { def: "對事物的認識與了解。", sent: ["讀書可以增加<b>知識</b>。", "我們要學習新<b>知識</b>。"] },
            "歡迎": { def: "高興地迎接。", sent: ["<b>歡迎</b>光臨！", "全班拍手<b>歡迎</b>新老師。"] },
            "排隊": { def: "依序排列成行。", sent: ["買票要<b>排隊</b>。", "大家<b>排隊</b>上公車。"] },
            "口渴": { def: "口乾想喝水。", sent: ["運動後覺得很<b>口渴</b>。", "<b>口渴</b>時要多喝水。"] },
            "喝水": { def: "飲水。", sent: ["烏鴉想<b>喝水</b>。", "多<b>喝水</b>有益健康。"] },
            "辦法": { def: "處理事情的方法。", sent: ["我想出了一個好<b>辦法</b>。", "遇到困難要像<b>辦法</b>解決。"] },
            "到處": { def: "處處、各處。", sent: ["公園裡<b>到處</b>都是花。", "垃圾不要<b>到處</b>亂丟。"] },
            "終於": { def: "到底、最後。", sent: ["雨<b>終於</b>停了。", "我<b>終於</b>完成了作業。"] },
            "鼓起勇氣": { def: "振作起勇氣。", sent: ["他<b>鼓起勇氣</b>上台演講。", "我們要<b>鼓起勇氣</b>面對困難。"] },

            // --- 2526綜合高效識字1 (第一課 小明) ---
            "小明": { def: "常見人名。", sent: ["<b>小明</b>是我的好朋友。", "<b>小明</b>很喜歡看書。"] },
            "上下": { def: "上面和下面。", sent: ["搭電梯要注意<b>上下</b>。", "這本書分<b>上下</b>兩冊。"] },
            "左右": { def: "左邊和右邊。", sent: ["過馬路要看<b>左右</b>。", "我的<b>左右</b>鄰居都很友善。"] },
            "前後": { def: "前面和後面。", sent: ["排隊要對齊<b>前後</b>。", "房子<b>前後</b>都有樹。"] },
            "穿": { def: "穿著、穿過。", sent: ["天冷多<b>穿</b>衣。", "火車<b>穿</b>過山洞。"] },
            "山洞": { def: "山中的洞穴。", sent: ["熊住在<b>山洞</b>裡。", "火車開進了<b>山洞</b>。"] },
            "公雞": { def: "雄性的雞。", sent: ["<b>公雞</b>早起啼叫。", "這隻<b>公雞</b>羽毛很漂亮。"] },
            "紅綠燈": { def: "交通號誌。", sent: ["過馬路要看<b>紅綠燈</b>。", "遵守<b>紅綠燈</b>，安全有保障。"] },
            "過馬路": { def: "橫越道路。", sent: ["<b>過馬路</b>要走斑馬線。", "小學生排隊<b>過馬路</b>。"] },
            "放心": { def: "心情安定，不憂慮。", sent: ["看到你平安我就<b>放心</b>了。", "請<b>放心</b>，我會準時到的。"] },
            "無數": { def: "數量極多。", sent: ["天上有<b>無數</b>的星星。", "海灘上有<b>無數</b>的沙粒。"] },
            "外婆": { def: "媽媽的媽媽。", sent: ["我去<b>外婆</b>家玩。", "<b>外婆</b>煮的菜很好吃。"] },
            "開心": { def: "快樂、高興。", sent: ["今天玩得很<b>開心</b>。", "看到你這麼<b>開心</b>真好。"] },
            "媽媽": { def: "母親。", sent: ["<b>媽媽</b>每天辛苦照顧我們。", "我愛我的<b>媽媽</b>。"] },
            "回家": { def: "返回家裡。", sent: ["放學後要馬上<b>回家</b>。", "爸爸下班<b>回家</b>了。"] },
            "幫忙": { def: "幫助別人。", sent: ["我喜歡<b>幫忙</b>做家事。", "謝謝你的<b>幫忙</b>。"] },
            "白水泉": { def: "形容泉水清澈潔白。", sent: ["這裡有清涼的<b>白水泉</b>。", "<b>白水泉</b>水質甘甜。"] },
            "味道": { def: "舌頭嘗到的滋味。", sent: ["這道菜的<b>味道</b>真好。", "空氣中有花香的<b>味道</b>。"] },
            "太陽": { def: "恆星名，日。", sent: ["<b>太陽</b>從東方升起。", "冬天曬<b>太陽</b>很舒服。"] },
            "河水": { def: "河裡的水。", sent: ["<b>河水</b>清澈見底。", "小魚在<b>河水</b>裡游。"] },
            "蜻蜓": { def: "昆蟲名。", sent: ["<b>蜻蜓</b>在水面上飛。", "紅色的<b>蜻蜓</b>真漂亮。"] },

            // --- 2526綜合高效識字2 (第二課 有隻小鳥掉下水) ---
            "小鳥": { def: "體型小的鳥。", sent: ["<b>小鳥</b>在唱歌。", "樹上有一隻<b>小鳥</b>。"] },
            "掉": { def: "落下。", sent: ["筆<b>掉</b>在地上了。", "小心不要<b>掉</b>進水坑。"] },
            "沖走": { def: "被水流帶走。", sent: ["城堡被海浪<b>沖走</b>了。", "雨水把垃圾<b>沖走</b>了。"] },
            "綿羊": { def: "羊的一種，毛捲曲。", sent: ["草原上有一群<b>綿羊</b>。", "<b>綿羊</b>毛可以做毛衣。"] },
            "叫聲": { def: "喊叫的聲音。", sent: ["小狗的<b>叫聲</b>很大。", "森林裡傳來鳥的<b>叫聲</b>。"] },
            "水果攤": { def: "賣水果的攤位。", sent: ["<b>水果攤</b>上有很多水果。", "媽媽在<b>水果攤</b>買蘋果。"] },
            "菜市場": { def: "買賣蔬菜食物的場所。", sent: ["<b>菜市場</b>裡很熱鬧。", "奶奶去<b>菜市場</b>買菜。"] },
            "四季": { def: "春、夏、秋、冬。", sent: ["一年有<b>四季</b>。", "<b>四季</b>的景色都不同。"] },
            "蝴蝶": { def: "昆蟲名，翅膀有花紋。", sent: ["<b>蝴蝶</b>在花叢中飛舞。", "這隻<b>蝴蝶</b>真美。"] },
            "小蝌蚪": { def: "青蛙的幼體。", sent: ["<b>小蝌蚪</b>找媽媽。", "<b>小蝌蚪</b>在水裡游。"] }
        };

        // HanziWriter 實例變數
        let demoWriter = null;
        let quizWriter = null;
        let currentWord = "";

        // 監聽 Enter 鍵
        function handleEnter(e) {
            if (e.key === 'Enter') searchWord();
        }

        // 搜尋主邏輯
        function searchWord() {
            const input = document.getElementById('searchInput').value.trim();
            const mainContent = document.getElementById('mainContent');
            const displayWord = document.getElementById('displayWord');
            const displayPinyin = document.getElementById('displayPinyin');
            const displayDef = document.getElementById('displayDefinition');
            const displaySent = document.getElementById('displaySentences');
            const charTabs = document.getElementById('charTabs');

            if (!input) return;

            // 1. 檢查資料庫是否有此詞語
            const data = fullDatabase[input];

            if (data) {
                // 有找到資料
                currentWord = input;
                mainContent.style.display = 'block';
                displayWord.textContent = input;
                displayDef.textContent = data.def;
                
                // 渲染造句
                displaySent.innerHTML = data.sent.map(s => 
                    `<li class="sentence-item">${s}</li>`
                ).join('');

                // 2. 處理筆順：如果是多字詞（如"打掃"），建立分頁按鈕
                charTabs.innerHTML = ''; // 清空舊按鈕
                for (let i = 0; i < input.length; i++) {
                    const char = input[i];
                    const btn = document.createElement('div');
                    btn.className = `char-tab ${i === 0 ? 'active' : ''}`; // 預設選第一個字
                    btn.textContent = char;
                    btn.onclick = () => switchChar(char, btn);
                    charTabs.appendChild(btn);
                }

                // 預設載入第一個字的筆順
                initWriters(input[0]);

            } else {
                alert("抱歉，資料庫暫時沒有「" + input + "」這個詞。\n請試試：打掃、猴子、天氣、小明...");
            }
        }

        // 切換單字筆順
        function switchChar(char, btnElement) {
            // 更新按鈕樣式
            document.querySelectorAll('.char-tab').forEach(b => b.classList.remove('active'));
            btnElement.classList.add('active');
            
            // 重新載入筆順
            initWriters(char);
        }

        // 初始化 HanziWriter
        function initWriters(char) {
            const width = Math.min(window.innerWidth - 60, 280); // 響應式寬度

            // 清空舊的
            document.getElementById('demo-writer').innerHTML = '';
            document.getElementById('quiz-writer').innerHTML = '';

            // 1. 演示用 Writer
            demoWriter = HanziWriter.create('demo-writer', char, {
                width: width,
                height: width,
                padding: 10,
                showOutline: true,
                strokeAnimationSpeed: 1, // 播放速度
                delayBetweenStrokes: 200,
                strokeColor: '#4A90E2' // 藍色筆劃
            });

            // 2. 練習用 Writer (Quiz模式)
            quizWriter = HanziWriter.create('quiz-writer', char, {
                width: width,
                height: width,
                padding: 10,
                showOutline: true,
                showCharacter: false, // 預設隱藏字，讓學生描
                strokeColor: '#f39c12', // 橘色筆劃
                highlightColor: '#f39c12',
                drawingWidth: 20, // 筆觸粗細
                showHintAfterMisses: 1 // 寫錯1次提示
            });

            // 啟動測驗模式
            quizWriter.quiz();
        }

        // 控制按鈕功能
        function animateChar() {
            if(demoWriter) demoWriter.animateCharacter();
        }

        function quizChar() {
            if(quizWriter) quizWriter.quiz();
        }

    </script>
</body>
</html>
